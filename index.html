<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é †åºæŠ½ç±¤ï¼ˆè‡ªæˆ‘æ’é™¤ï¼‰</title>
  <style>
    :root{
      --font: 22px;
      --font-big: 30px;
      --radius: 18px;
      --pad: 16px;
      --gap: 12px;
      --border: 1px solid #ddd;
    }
    body{
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans TC", system-ui, "Segoe UI", Arial;
      margin: 16px;
      font-size: var(--font);
      line-height: 1.5;
      background: #fff;
      color:#111;
    }
    h1{
      margin: 0 0 10px;
      font-size: 28px;
    }
    .muted{ color:#666; font-size: 18px; }
    .card{
      border: var(--border);
      border-radius: var(--radius);
      padding: var(--pad);
      margin: 14px 0;
    }
    .row{ display:flex; gap: var(--gap); flex-wrap: wrap; align-items: center; }
    button{
      font-size: 22px;
      padding: 14px 18px;
      border-radius: 16px;
      border: 2px solid #111;
      background: #fff;
      font-weight: 800;
      cursor: pointer;
    }
    button:disabled{
      opacity: .45;
      cursor: not-allowed;
    }

    /* Radio list (big) */
    .radioList{
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    .radioItem{
      display:flex;
      align-items:center;
      gap: 14px;
      padding: 14px 14px;
      border: 2px solid #eee;
      border-radius: 16px;
    }
    .radioItem input[type="radio"]{
      width: 28px;
      height: 28px;
      transform: translateY(1px);
    }
    .radioItem b{
      font-size: 24px;
    }

    .big{
      font-size: var(--font-big);
      font-weight: 900;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 14px;
      border: 2px solid #eee;
      border-radius: 999px;
      font-size: 20px;
      background: #fafafa;
    }
    .listBox{
      max-height: 220px;
      overflow:auto;
      border: 2px solid #eee;
      border-radius: 16px;
      padding: 10px 14px;
      background: #fff;
    }
    .listBox div{ padding: 6px 0; border-bottom: 1px dashed #eee; }
    .listBox div:last-child{ border-bottom: 0; }

    .success{ color:#137333; }
    .danger{ color:#b00020; }
  </style>
</head>

<body>
  <h1>ğŸ¯ é †åºæŠ½ç±¤ï¼ˆæ’é™¤æˆ‘è‡ªå·±ï¼‹å·²æŠ½éï¼‰</h1>
  <div class="muted">æµç¨‹ï¼šå…ˆé¸ã€Œæˆ‘æ˜¯èª°ã€â†’ é–‹å§‹ â†’ æ¯æ¬¡æŠ½ 1 äººï¼ŒæŠ½åˆ°å°±ç§»é™¤ï¼Œä¸é‡è¤‡ã€‚</div>

  <!-- STEP 1: pick me -->
  <div class="card" id="stepPickMe">
    <div class="big">1) ä½ æ˜¯èª°ï¼Ÿï¼ˆå–®é¸ï¼‰</div>
    <div class="radioList" id="radioList"></div>

    <div class="row" style="margin-top: 14px;">
      <button id="btnStart" disabled>é–‹å§‹ï¼ˆæ’é™¤æˆ‘è‡ªå·±ï¼‰</button>
      <span class="muted" id="pickHint">è«‹å…ˆé¸ä¸€å€‹äººå</span>
    </div>
  </div>

  <!-- STEP 2: draw -->
  <div class="card" id="stepDraw" style="display:none;">
    <div class="row">
      <span class="pill">æˆ‘è‡ªå·±ï¼š<b id="meName">â€”</b>ï¼ˆå·²æ’é™¤ï¼‰</span>
      <span class="pill">å‰©é¤˜ï¼š<b id="remainCount">0</b> äºº</span>
    </div>

    <div class="row" style="margin-top: 14px;">
      <button id="btnDraw">æŠ½ä¸‹ä¸€ä½</button>
      <button id="btnResetAll" style="border-color:#999; font-weight:700;">å…¨éƒ¨é‡ä¾†</button>
    </div>

    <div class="card" style="border:2px solid #eee; background:#fafafa;">
      <div class="big" id="result">å°šæœªæŠ½ç±¤</div>
      <div class="muted" id="status"></div>
    </div>

    <div class="row" style="margin-top: 10px;">
      <div style="flex:1; min-width: 260px;">
        <div style="font-weight:900; margin-bottom:8px;">å·²æŠ½é †åº</div>
        <div class="listBox" id="historyBox"></div>
      </div>
      <div style="flex:1; min-width: 260px;">
        <div style="font-weight:900; margin-bottom:8px;">å·²æ’é™¤åå–®ï¼ˆå«æˆ‘è‡ªå·±ï¼‹å·²æŠ½éï¼‰</div>
        <div class="listBox" id="excludedBox"></div>
      </div>
    </div>
  </div>

<script>
  // ===== ä½ çš„äººåæ¸…å–®ï¼šåªè¦æ”¹é€™è£¡ =====
  const ALL_NAMES = ["ç‰","å†°","éˆ","ç´…","è‘‰","ç™½","åº•","è±†","å®","7","å¤§é›„","Allen"];

  // ===== State =====
  let me = null;
  let remaining = [];
  let excluded = new Set();
  let history = [];

  // ===== Elements =====
  const radioList = document.getElementById("radioList");
  const btnStart = document.getElementById("btnStart");
  const pickHint = document.getElementById("pickHint");

  const stepPickMe = document.getElementById("stepPickMe");
  const stepDraw = document.getElementById("stepDraw");

  const meName = document.getElementById("meName");
  const remainCount = document.getElementById("remainCount");
  const btnDraw = document.getElementById("btnDraw");
  const btnResetAll = document.getElementById("btnResetAll");

  const result = document.getElementById("result");
  const status = document.getElementById("status");
  const historyBox = document.getElementById("historyBox");
  const excludedBox = document.getElementById("excludedBox");

  function renderPickMe(){
    radioList.innerHTML = "";
    ALL_NAMES.forEach((name, idx) => {
      const label = document.createElement("label");
      label.className = "radioItem";

      const input = document.createElement("input");
      input.type = "radio";
      input.name = "me";
      input.value = name;
      input.id = "me_" + idx;

      input.addEventListener("change", () => {
        me = name;
        btnStart.disabled = false;
        pickHint.textContent = `å·²é¸ï¼š${me}`;
        pickHint.className = "muted success";
      });

      const text = document.createElement("b");
      text.textContent = name;

      label.appendChild(input);
      label.appendChild(text);
      radioList.appendChild(label);
    });
  }

  function initGame(){
    if(!me) return;

    // reset
    excluded = new Set([me]);               // å…ˆæ’é™¤è‡ªå·±
    remaining = ALL_NAMES.filter(n => n !== me);
    history = [];

    // UI
    meName.textContent = me;
    remainCount.textContent = remaining.length;
    result.textContent = "æŒ‰ã€ŒæŠ½ä¸‹ä¸€ä½ã€é–‹å§‹";
    status.textContent = "ä½ è‡ªå·±å·²æ’é™¤ï¼Œä¸æœƒè¢«æŠ½åˆ°ã€‚";
    status.className = "muted";

    renderHistory();
    renderExcluded();

    stepPickMe.style.display = "none";
    stepDraw.style.display = "block";

    btnDraw.disabled = remaining.length === 0;
  }

  function drawNext(){
    if(remaining.length === 0){
      result.textContent = "âœ… å…¨éƒ¨éƒ½æŠ½å®Œäº†";
      status.textContent = "æ²’æœ‰å‰©é¤˜äººå“¡å¯ä»¥æŠ½ã€‚";
      status.className = "muted";
      btnDraw.disabled = true;
      return;
    }

    const idx = Math.floor(Math.random() * remaining.length);
    const picked = remaining.splice(idx, 1)[0]; // æŠ½åˆ°å°±ç§»é™¤

    excluded.add(picked);
    history.push(picked);

    result.innerHTML = `ğŸ‰ æŠ½åˆ°ï¼š<span class="success">${picked}</span>`;
    status.textContent = `å·²å°‡ã€Œ${picked}ã€æ’é™¤ï¼Œä¸‹ä¸€è¼ªä¸æœƒå†æŠ½åˆ°ã€‚`;
    remainCount.textContent = remaining.length;

    renderHistory();
    renderExcluded();

    if(remaining.length === 0){
      status.textContent = "âœ… å·²æŠ½å®Œæ‰€æœ‰äººï¼ˆé™¤äº†ä½ è‡ªå·±ï¼‰ã€‚";
      btnDraw.disabled = true;
    }
  }

  function renderHistory(){
    historyBox.innerHTML = "";
    if(history.length === 0){
      historyBox.innerHTML = `<div class="muted">ï¼ˆå°šæœªæŠ½å‡ºä»»ä½•äººï¼‰</div>`;
      return;
    }
    history.forEach((n, i) => {
      const div = document.createElement("div");
      div.innerHTML = `<b>#${i+1}</b>ã€€${n}`;
      historyBox.appendChild(div);
    });
  }

  function renderExcluded(){
    excludedBox.innerHTML = "";
    const arr = Array.from(excluded);
    if(arr.length === 0){
      excludedBox.innerHTML = `<div class="muted">ï¼ˆç›®å‰æ²’æœ‰æ’é™¤ï¼‰</div>`;
      return;
    }
    arr.forEach(n => {
      const div = document.createElement("div");
      div.innerHTML = (n === me) ? `ğŸ‘¤ <b>${n}</b>ï¼ˆæˆ‘è‡ªå·±ï¼‰` : `ğŸš« ${n}`;
      excludedBox.appendChild(div);
    });
  }

  function resetAll(){
    // reset to pick-me screen
    me = null;
    stepDraw.style.display = "none";
    stepPickMe.style.display = "block";
    btnStart.disabled = true;
    pickHint.textContent = "è«‹å…ˆé¸ä¸€å€‹äººå";
    pickHint.className = "muted";

    // clear radios
    const radios = document.querySelectorAll('input[name="me"]');
    radios.forEach(r => r.checked = false);
  }

  // events
  btnStart.addEventListener("click", initGame);
  btnDraw.addEventListener("click", drawNext);
  btnResetAll.addEventListener("click", resetAll);

  // init
  renderPickMe();
</script>
</body>
</html>
